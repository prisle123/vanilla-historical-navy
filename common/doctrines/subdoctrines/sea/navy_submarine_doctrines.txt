wolfpacks = {
    track = submarines
    name = SUBDOCTRINE_SUBMARINE_WOLFPACKS
    description = SUBDOCTRINE_SUBMARINE_WOLFPACKS_DESC
    icon = GFX_doctrine_wolfpacks_medium

    xp_cost = 100
    xp_type = navy

    available = {
        always = yes
    }

    ai_will_do = { 
        base = 1
        modifier = {
            factor = 75
            original_tag = GER
        }
    }

    # EFFECTS
	submarine = {
		max_organisation = 10
        torpedo_attack = 0.05
	}

    rewards = {
		predictive_expertise = {
			submarine = {
                torpedo_attack = 0.05
				naval_torpedo_hit_chance_factor = 0.05
			}
            modifier = {
                naval_torpedo_reveal_chance_factor = -0.05
            }
		}
		pack_search_patterns = {
			submarine = {
				surface_detection = 0.1
				convoy_raiding_coordination = 0.1
			}
		}
		improvisation = {
			submarine = {
				reliability = 0.1
				max_organisation = 10
			}
            sub_retreat_speed = 0.1
		}
        rough_weather_procedure = {
			equipment_bonus = {
                ship_hull_submarine = {
				    naval_weather_penalty_factor = -0.15
		        }
            }
		}
		wolfpack_coordination = {
			submarine = {
                max_organisation = 5
				surface_detection = 0.1
				convoy_raiding_coordination = 0.15
			}
		}
    }
    mastery = {
        multiplier = 2
    }
}

submarine_fleet_operations = {
    track = submarines
    name = SUBDOCTRINE_SUBMARINE_FLEET_OPERATIONS
    description = SUBDOCTRINE_SUBMARINE_FLEET_OPERATIONS_DESC
    icon = GFX_doctrine_submarine_operations_medium

    xp_cost = 100
    xp_type = navy

    available = {
        always = yes
    }

    ai_will_do = { 
        base = 1
        modifier = {
            factor = 25
            original_tag = USA
        }
        modifier = {
            factor = 25
            original_tag = FRA
        }
        modifier = {
            factor = 25
            original_tag = ITA
        }
        modifier = {
            factor = 25
            original_tag = SOV
        }
    }

    # EFFECTS
    navy_submarine_attack_factor = 0.05
	naval_torpedo_screen_penetration_factor = 0.05

    rewards = {
		long_range_patrol_schedule = {
			submarine = {
				naval_range = 0.1 #TODO: does this work?
			}
		}
		sustained_operations = {
			submarine = {
				max_organisation = 10
                convoy_raiding_coordination = 0.1
			}
		}
		ambush_tactics = {
			navy_submarine_attack_factor = 0.10
		}
		submarine_picket = {
			submarine = {
                surface_detection = 0.15
            }
		}
		trade_interdiction = {
			submarine = {
                max_organisation = 5
				convoy_raiding_coordination = 0.10
                surface_detection = 0.1
			}
		}
    }
    mastery = {
        multiplier = 2
    }
}

capital_hunters = {
	track = submarines
    name = SUBDOCTRINE_SUBMARINE_CAPITAL_HUNTERS
    description = SUBDOCTRINE_SUBMARINE_CAPITAL_HUNTERS_DESC
    icon = GFX_doctrine_unrestricted_submarine_warfare_medium

    xp_cost = 100
    xp_type = navy

    ai_will_do = { 
        base = 1
        modifier = {
            factor = 25
            original_tag = JAP
        }
    }
    available = {
        always = yes
    }

    naval_torpedo_reveal_chance_factor = -0.1

    rewards = {
    	fire_protocol_drills = {
    		submarine = {
    			naval_torpedo_hit_chance_factor = 0.1
    		}
    	}
    	battle_line_priority = {
    		naval_torpedo_screen_penetration_factor = 0.05
    	}
    	quick_reload_procedures = {
    		naval_torpedo_cooldown_factor = -0.125
    	}
    	battleship_chase = {
    		submarine = {
    			fuel_consumption = -0.1
    			naval_range = 0.1
    		}
    	}
    	escape_when_empty = {
    		modifier = {
                sub_retreat_speed = 0.15
            }
    	}
    }
    mastery = {
        multiplier = 2
    }
}

submarine_coastal_defense = {
	track = submarines
    name = SUBDOCTRINE_SUBMARINE_COASTAL_DEFENSE
    description = SUBDOCTRINE_SUBMARINE_COASTAL_DEFENSE_DESC
    icon = GFX_doctrine_undersea_blockade_medium

    xp_cost = 100
    xp_type = navy

    available = {
        has_tech = midget_submarines
    }

    submarine = {
        supply_consumption = -0.02
    }

    rewards = {

    	optimized_compartments = {
            equipment_bonus = {
                vnr_ship_hull_midget_submarine = {
                    reliability = 0.1
                    instant = yes
                }
            }
    	}
    	patrol_vigilance = {
    		submarine = {
    			max_organisation = 5
    			surface_detection = 0.1
    		}
    	}
    	maneuever_fire = {
            modifier = {
                naval_torpedo_cooldown_factor = -0.125
            }
    	}
    	locals_knowledge = {
    		submarine = {
                max_organisation = 5
                convoy_raiding_coordination = 0.05
            }
    	}
    	high_explosive_torpedo = {
    		submarine = {
    			torpedo_attack = 0.1
    		}
    	}
    }
    mastery = {
        multiplier = 2
    }
}
